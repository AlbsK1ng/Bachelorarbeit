\section{Entwicklung}
In diesem Kapitel wird die Entwicklung des digitalen Zwillings für die robocell beschrieben.
\dots

\dots

\dots

\dots

\dots
\dots
\subsection{Konzeptionierung des digitalen Zwilling}
Ziel dieses Kapitels ist es, eine grundlegende Basis für die Erstellung des digitalen Zwillings der robocell zu schaffen.
Dabei wird untersucht, welche Daten für die Modellierung erforderlich sind, wo diese herkommen und wie sie in (standardisierten) Teilmodellen der \acs{aas} strukturiert werden können.
\subsubsection{Identifikation relevanter Datenquellen}
Ein digitaler Zwilling basiert immmer auf einer Vielzahl unterschiedlicher Daten, die gemeinsam ein umfassendes digitales Abbild eines Assets ermöglichen. 
Dabei werden sowohl statische Informationen (z.B. Datenblätter oder Konstruktionsdaten) als auch dynamische Daten, die während des Betriebs einer Maschine anfallen, benötigt.

Im ersten Schritt gilt es daher, alle relevanten Datenquellen zu identifizieren.
In industriellen Umgebungen existieren hierfür typischerweise verschiedene Systeme zur Erfassung, Verwaltung und Speicherung von Maschinendaten.
Bei groninger übernimmt diese Funktion das \acs{plm}-System Agile, das eng mit dem \acs{erp}-System PSI Penta verknüpft ist.
Darin sind unter anderem Stücklisten, technische Spezifikationen, \acs{cad}-Dateien sowie allgemeine Dokumente hinterlegt, die die statische Grundlage  für den digitalen Zwilling bilden.

Neben den Informationen aus den Unternehmenssystemen spielen aber auch Laufzeitdaten, wie sie durch Sensoren oder Steuerungssysteme erzeugt werden, eine zentrale Rolle.
Da im Rahmen dieser Arbeit keine reale Maschine angebunden ist, werden diese Daten simuliert.
Hierfür wird eine in node.js entwickelte Anwendung eingesetzt, die sowohl Prozess- als auch Betriebsdaten generiert. 
Ergänzend dazu wird ein Maschinensimulator verwendet, der einen PackML-Zustandsautomaten abbildet und typische Maschinenzustände sowie deren Übergänge simuliert. 
Beide Komponenten stehen als Docker Container zur Verfügung und stellen die Daten über einen \acs{opcua} Server bereit, wodurch eine realitätsnahe Datenbasis geschaffen wird.
\subsubsection{Auswahl geeigneter Teilmodelle}
Aufbauend auf den zuvor betrachteten Informationsquellen gilt es nun zu entscheiden, welche Aspekte der Maschine im digitalen Zwilling abgebildet werden sollen.
Dabei werden die Informationen in unterschiedlichen Submodellen der \acs{aas} strukturiert.

Als Orientierung dienen die von der \acs{idta} bereitgestellten Submodel Templates \cite{idtaTemplates}, die bereits viele typische Anwendungsfälle standardisiert abdecken.
Diese sind jeweils in einer Spezifikation der \acs{idta} definiert.
Darüber hinaus besteht jedoch auch die Möglichkeit, eigene Submodelle zu entwerfen, die gezielt auf projektspezifische Anforderungen zugeschnitten sind.
Diese können entweder vollständig neu konzipiert oder aus bestehenden Vorlagen abgeleitet werden.

Die konkrete Auswahl der Submodelle in dieser Arbeit orientiert sich hauptsächlich an typischen Industrie 4.0-Anwendungsfällen, die unter anderem auf der Website der \acs{idta} dokumentiert sind \cite{idtaUseCases}.
Diese Anwendungsfälle zeigen auf, welche Submodelle in der Praxis besonders relevant sind.
Eines der wichtigsten ist vermutlich das digitale Typenschild.
Daneben wurden aber auch projektspezifische Anforderungen berücksichtigt, die sich aus den verfügbaren Daten sowie dem fachlichen Austausch mit Industriepartnern wie Wittenstein ergaben.


Ein wesentlicher Vorteil der \acs{aas} besteht darin, dass die Auswahl der Submodelle flexibel ist.
Sie können sukszessive ergänzt, angepasst oder auch wieder entfernt werden.
Es werden im Folgenden deshalb zunächst nur die wichtigsten, in diesem Projekt eingesetzten Submodelle betrachtet, die in späteren Anwendungsfällen gezielt erweitert werden.
Die nachfolgende Tabelle gibt einen Überblick über die initiale Auswahl dieser Submodelle, ihre typischen Inhalte sowie deren Standardisierung.

% Wie erfolgt die Auswahl? sss

%Nachfolgende Tabelle gibt einen Überblick über die wichtigsten, in diesem Projekt eingesetzten Submodelle sowie ihrer Inhalte.
%Die bereits veröffentlichten Modelle sind dabei jeweils in einer Spezifikation der \acs{idta} standardisiert.

\input{TabelleSubmodelle.tex}





\subsection{Modellierung mit der AAS}
In diesem Kapitel wird erläutert, wie die zuvor ausgewählten Submodelle mit konkreten Daten befüllt werden können und welche Aspekte bei der Modellierung beachtet werden müssen.
Für die manuelle Erstellung der \acs{aas} wird dabei der Package Explorer eingesetzt.
Zudem wird gezeigt, wie die erstellte \acs{aas} mit Hilfe einer Test Engine auf eine korrekte und vollständige Struktur überprüft werden kann. 
\subsubsection{Umsetzung mit dem Package Explorer}
Im ersten Schritt muss eine neue \acs{aas} erstellt werden.
Dazu kann im Package Exporer eine neue Umgebung geöffnet werden, die als Container für die Inhalte eines Assets dient.
Im Anschluss kann eine neue \acs{aas} hinzugefügt werden, die allgemeine Informationen sowie assetspezifische Daten enthält.
Neben der Auswahl des Asset-Typs (Instanz oder Typ) spielt insbesondere die eindeutige Identifikation eine wichtige Rolle.
Das Asset wird über eine globalAssetId identifiziert, während die \acs{aas} selbst eine eigene ID sowie eine idShort erhält.
Dies ist besonders wichtig für den späteren Austausch der \acs{aas} sowie das systemweite Auffinden innerhalb eines Industrie 4.0-Ökosystem.

!!! Bild mit Markierung der ids und idShort

Im nächsten Schritt müssen die benötigten Submodelle hinzugefügt werden. 
Auch diese können als Instanz oder Typ angelegt werden.
Dabei besteht die Möglichkeit, entweder ein leeres Submodell manuell mit verschiedenen Submodellelementen zu erstellen oder auf ein vorhandenes Submodel Template zurückzugreifen.
Letztere können als AASX-Datei, beispielsweise über das Repository der \acs{idta} \cite{idtaTemplates}, heruntergeladen und anschließend über ein sogenanntes Auxiliary AAS in die Umgebung geladen werden.
Sie stehen dann zur Verfügung und können in die \acs{aas} kopiert werden.

Nachdem alle Submodelle erstellt bzw. eingebunden sind, müssen diese mit den entsprechenden Inhalten gefüllt werden.
Hierzu können konkrete Werte, Dateien oder Referenzen direkt in den jeweiligen Submodellelementen eingetragen bzw. eingebettet werden.
Besonders bei der Verwendung von Templates muss darauf geachtet werden, dass die Struktur dieser nicht verändert wird, da dies sonst zu Abweichungen von der Spezifikation führen kann.


Zur Gewährleistung einer einheitlichen semantischen Beschreibung können einzelne Elemente innerhalb eines Submodells mit einer sogenannten semanticId versehen werden.
Diese verweist entweder auf externe Standards oder auf lokale Concept Descriptions innerhalb der AAS-Umgebung.
Eine Concept Description kann manuell erstellt oder über den ECLASS-Standard eingebunden werden.
Der Package Explorer bietet hierfür eine erweiterte Funktion, bei der sich vorgefertigte ECLASS-Kataloge importieren lassen.
Die enthalten Begriffe können direkt im Package Explorer dursucht, ausgewählt und dem enstprechenden Submodellelementen zugewiesen werden.

Sobald alle gewünschten Submodelle mit Inhalten gefüllt und semantisch beschrieben sind, kann die \acs{aas} gespeichert und exportiert werden.
In diesem Projekt erfolgt dies bevorzugt im AASX-Format, das sich als standardisierte Austauschform für die \acs{aas} etabliert hat und eine einfache Weitergabe oder Validierung ermöglicht.




\subsubsection{Validierung}
Nach der Erstellung sollte eine Überprüfung der Konformität der \acs{aas} erfolgen.
Hierzu wird eine von der \acs{idta} bereitgestellte Test Engine eingesetzt \cite{TestEngine}. 
Diese kann direkt mit pip, dem Paktemanager von Python, installiert und anschließend über die Kommandozeile genutzt werden.

Mit folgendem Befehl kann nun die zuvor erstellte AASX-Datei der robocell validiert werden.
%Mit dem Befehl: aas_test_engines check_file my_aas.aasx kann eine AASX-Datei validiert werden.
\begin{verbatim}
aas_test_engines check_file robocell.aasx
\end{verbatim}

Dabei wird zunächst geprüft, ob die AASX-Datei formal korrekt aufgebaut ist, insbesondere hinsichtlich der internen Struktur und ihrer Beziehungen.
Anschließend erfolgt die Kontrolle der enthaltenen \acs{aas} gegen die Metamodell-Spezifikationen der \acs{idta} (Teil 1 \cite{SpezifikationPart1} und 3a \cite{SpezifikationPart3a}).
Zuletzt erfolgt ein Abgleich der Submodelle mit ihren entsprechenden Submodel Templates.
Wenn im ganzen Prozess keine Fehler oder Abweichungen gefunden werden, folgt eine entsprechende Bestätigung der Test Engine (siehe Abbildung !!!xy).

!!!Bild Test Engine Bestätigung

\subsection{Technische Integration}
\subsubsection{Bereitstellung der Verwaltungsschalen}
\subsubsection{Datenzugriff über standardisierte Schnittstellen}
\subsubsection{Integration von Echtzeitdaten über OPC UA}
\subsubsection{Verarbeitung von Zeitreihendaten}
\subsection{Anwendungsfall Digitaler Produktpass}
\subsubsection{Beschreibung}
\subsubsection{Umsetzung mit dem Teilmodell Carbon Footprint}
\subsection{Anwendungsfall automatisierte Generierung von AAS}
\subsubsection{Erstellen von Submodell-Templates}
\subsubsection{Befüllen der Templates mit strukturierten Daten}
\subsubsection{Bereitstellen der AAS über die Rest API}
\subsubsection{Potenziale des KI-Einsatzes}